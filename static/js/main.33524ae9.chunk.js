(this["webpackJsonpmy-cookbook"]=this["webpackJsonpmy-cookbook"]||[]).push([[0],{199:function(e,t,a){e.exports=a.p+"static/media/burger.4dbbd9f7.gif"},202:function(e,t,a){e.exports=a.p+"static/media/coffee.a7e354ce.jpg"},211:function(e,t,a){e.exports=a.p+"static/media/logo.ce3f22a7.png"},233:function(e,t,a){e.exports=a(406)},398:function(e,t,a){},403:function(e,t,a){},404:function(e,t,a){},406:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(12),r=a(0),c=a.n(r),i=(a(235),a(114)),o=a.n(i),l={apiKey:"AIzaSyCrE4LCvnWtIr_EfCSuRjTWrgQYV3vF8ow",authDomain:"cookbook-530b0.firebaseapp.com"},s=c.a.createContext(null),u=function(e){return function(t){return c.a.createElement(s.Consumer,null,(function(a){return c.a.createElement(e,Object.assign({},t,{firebase:a}))}))}},m=function e(){var t=this;Object(n.a)(this,e),this.doSignInWithGoogle=function(){return t.auth.signInWithPopup(t.googleProvider)},this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},o.a.initializeApp(l),this.auth=o.a.auth(),this.googleProvider=new o.a.auth.GoogleAuthProvider},p=a(14),d=a(16),f=a(15),h=a(8),g=a(29),v=a(49),E=a(198),b=a.n(E),y=a(454),O=a(39),j=a.n(O),C=a(219),w=a(17),x=a.n(w),k=a(22),R=a(441),S=a(407),P=a(140),I=a(199),N=a.n(I),D=function(e){var t=e.classes;return c.a.createElement("div",{className:t.container},c.a.createElement("img",{src:N.a,alt:"loading",className:t.image}))};D.defaultProps={classes:{}};var A=Object(S.a)({container:{minWidth:"100%"},image:{display:"block",margin:"auto",paddingTop:"2em"}})(D),T=a(438),F=a(439),_=a(440),U=a(141),W=a(5),L=a(201),B=a.n(L),V=a(461),M=function(e){var t=e.onClick,a=e.src,n=e.imgProps,r=e.name,i=e.nameProps,o=e.classes,l=function(e){var a=i.display,n=i.className;if(r&&e===a)return c.a.createElement(U.a,{onClick:t,className:n,variant:"body2",component:"span"},r)};return c.a.createElement("div",{className:o.container},l("left"),c.a.createElement("div",{onClick:t,className:n.className},c.a.createElement(V.a,{className:"large"===n.size?o.large:o.small,src:a||"https://i.imgur.com/oTPg6oz.jpg"})),l("right"))},G=Object(W.a)({container:{display:"flex",flexDirection:"row",alignItems:"center"},small:{height:25,width:25},large:{height:32,width:32}})(M);M.defaultProps={onClick:void 0,src:void 0,imgProps:{size:void 0},name:void 0,nameProps:{display:"none"}};var z=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.imageUrl,n=e.title,r=e.description,i=e.name,o=e.profilePic;return c.a.createElement(T.a,{className:t.card},c.a.createElement(F.a,{className:t.media,image:a}),c.a.createElement(_.a,null,c.a.createElement(U.a,{className:t.title,gutterBottom:!0,variant:"h5",component:"h2"},n),c.a.createElement("div",{className:t.body},c.a.createElement(U.a,{className:t.description,variant:"body1",color:"inherit",component:"span"},c.a.createElement(B.a,{line:2,truncateText:" \u2026",text:r}))),c.a.createElement(G,{src:o,imgProps:{size:"small"},name:i,nameProps:{className:t.name,display:"right"}})))}}]),a}(r.PureComponent);z.defaultProps={classes:{},name:void 0,profilePic:void 0};var q=Object(W.a)((function(e){return{card:{maxWidth:300,height:430},media:{height:300,width:300},title:{fontSize:"1rem",fontWeight:600},body:{height:50},description:{fontSize:"0.8rem",color:"#595959"},footer:{display:"flex",flexDirection:"row",alignItems:"center"},avatar:{height:25,width:25},name:{paddingLeft:e.spacing(1),color:"#333333"}}}))(z),H="https://joel-cookbook-server.herokuapp.com",K=function(e){var t="DEV"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SECRET:"62b2a35533d6b3e60135793a95c16bccd5e6e2c9",REACT_APP_FIREBASE_AUTH_DOMAIN:"cookbook-530b0.firebaseapp.com",REACT_APP_IMGUR_CLIENT_ID:"643c914b5a7a2f3",REACT_APP_FIREBASE_API_KEY:"AIzaSyCrE4LCvnWtIr_EfCSuRjTWrgQYV3vF8ow",REACT_APP_GOOGLE_ANALYTICS:"UA-148191778-1s"}).REACT_APP_ENV?"http://localhost:8080":H;return j.a.get("".concat(t,"/").concat(e))},Y=function(e,t){var a="DEV"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SECRET:"62b2a35533d6b3e60135793a95c16bccd5e6e2c9",REACT_APP_FIREBASE_AUTH_DOMAIN:"cookbook-530b0.firebaseapp.com",REACT_APP_IMGUR_CLIENT_ID:"643c914b5a7a2f3",REACT_APP_FIREBASE_API_KEY:"AIzaSyCrE4LCvnWtIr_EfCSuRjTWrgQYV3vF8ow",REACT_APP_GOOGLE_ANALYTICS:"UA-148191778-1s"}).REACT_APP_ENV?"http://localhost:8080":H;return j.a.post("".concat(a,"/").concat(e),t)},J=a(224),Q=a(202),$=a.n(Q);var X=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.search;return c.a.createElement("div",{className:t.container},c.a.createElement(J.a,{square:!0,className:t.paper},c.a.createElement(U.a,{className:t.typography},c.a.createElement("i",null,"0 recipe results for"),' "'.concat(a.slice(a.indexOf("=")+1),'"')),c.a.createElement("img",{src:$.a,alt:"not found",className:t.image})))}}]),a}(r.PureComponent),Z=Object(W.a)((function(e){return{container:{top:64,width:"100%",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},paper:{width:"60vw",minHeight:100,padding:10},typography:{padding:e.spacing(1,0,0,1)},image:{maxWidth:300,height:"auto",display:"block",margin:"0 auto"}}}))(X);var ee=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getRecipes=Object(k.a)(x.a.mark((function e(){var t,a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=r.props.location.search,e.next=4,K("recipe".concat(t));case 4:a=e.sent,n=a.data.sort((function(e,t){return e.images.length>0&&0===t.images.length?-1:0===e.images.length&&t.images.length>0?1:0})),r.setState({recipes:n,loading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r.setState({error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),r.getUsers=Object(k.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K("users");case 3:t=e.sent,r.setState({users:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.setState({error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),r.initializeGA=function(){P.a.initialize("UA-148191778-1s"),P.a.pageview(window.location.pathname+window.location.search)},r.state={loading:!0},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.initializeGA(),this.getRecipes(),this.getUsers()}},{key:"componentDidUpdate",value:function(e){this.props.location.search!==e.location.search&&this.getRecipes()}},{key:"renderCards",value:function(){var e=this.props.classes,t=this.state,a=t.recipes,n=t.users;return a.map((function(t){var a=n?n.find((function(e){return e.recipes.includes(t._id)})):void 0;return c.a.createElement(R.a,{item:!0,key:t._id,className:e.card},c.a.createElement(g.b,{to:"/recipe/".concat(t._id),className:e.link},c.a.createElement(q,{imageUrl:t.images&&t.images.length?"https://i.imgur.com/".concat(t.images[0].id,".jpg"):"https://i.imgur.com/6MEHGTJ.jpg",title:t.title,description:t.description,name:a?a.name:void 0,profilePic:a?a.photo:void 0})))}))}},{key:"render",value:function(){var e=this.props.location.search,t=this.state,a=t.loading,n=t.recipes;return a?c.a.createElement(A,null):e&&n.length<1?c.a.createElement(Z,{search:e}):c.a.createElement(c.a.Fragment,null,c.a.createElement(R.a,{container:!0},c.a.createElement(R.a,{item:!0,xl:1}),c.a.createElement(R.a,{container:!0,item:!0,xl:10,spacing:1,alignItems:"center",justify:"center"},this.renderCards()),c.a.createElement(R.a,{item:!0,xl:1})))}}]),a}(r.Component);ee.defaultProps={classes:{}};var te=Object(S.a)({link:{textDecoration:"none",all:"inherit"},card:{cursor:"pointer"}})(ee),ae=a(447),ne=a(448),re=a(443),ce=a(35),ie=a(460),oe=a(444),le=a(445),se=a(60),ue=a(442),me=a(221),pe=a(462),de=function(e){var t=e.classes,a=e.anchorEl,n=e.firebase,r=Object(se.a)(e,["classes","anchorEl","firebase"]);return c.a.createElement(me.a,Object.assign({anchorEl:a,open:Boolean(a),anchorReference:"none",PaperProps:{style:{left:"92%",top:"6%"}}},r),c.a.createElement(pe.a,null,c.a.createElement(g.b,{to:"/recipe/new",className:t.link},"New Recipe")),c.a.createElement(ue.a,null),c.a.createElement(pe.a,{onClick:function(){return n.doSignOut()}},"Logout"))},fe=Object(S.a)({link:{padding:0,textDecoration:"none",all:"inherit"}})(u(de));de.defaultProps={classes:{},anchorEl:null};var he=a(11),ge=a(51),ve=a(84),Ee=a(455),be=a(81),ye=a(2),Oe=a.n(ye),je=(Oe.a.func.isRequired,Oe.a.string.isRequired,Oe.a.func.isRequired,Oe.a.string.isRequired,Oe.a.string,Oe.a.number,Oe.a.number,Oe.a.string,Oe.a.func.isRequired,Oe.a.func.isRequired,Oe.a.string.isRequired,Oe.a.string,Oe.a.string,Oe.a.string,Oe.a.number,Oe.a.func.isRequired,Oe.a.func.isRequired,Oe.a.string.isRequired,Oe.a.string,Oe.a.string,Oe.a.string,Oe.a.bool,{defaultValue:void 0,name:void 0,placeholder:void 0,rows:void 0}),Ce={defaultValue:void 0,name:void 0,placeholder:void 0,valid:!0},we=function(e,t){return e?c.a.createElement(U.a,{variant:"body2",color:t?"inherit":"error"},e):void 0},xe=function(e){var t=e.email,a=e.onChange,n=Object(se.a)(e,["email","onChange"]),i=Object(r.useState)(!1),o=Object(ve.a)(i,2),l=o[0],s=o[1],u=function(){var e=Object(k.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,be.string().email().required().validate(t);case 5:s(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),s(!0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(Ee.a,Object.assign({fullWidth:!0,variant:"outlined",autoComplete:"username",name:"email",placeholder:"Email",helperText:l?"Please enter a valid email address":void 0,error:l,onChange:a,onBlur:u},n))},ke=function(e){var t=e.title,a=e.name,n=e.min,r=e.max,i=e.onChange,o=e.defaultValue;return c.a.createElement(c.a.Fragment,null,we(t,!0),c.a.createElement(Ee.a,{required:!0,fullWidth:!0,variant:"outlined",type:"number",inputProps:{min:n,max:r},name:a||t.toLowerCase(),onChange:i,defaultValue:o}))};ke.defaultProps={defaultValue:void 0,name:void 0,max:void 0,min:void 0};var Re=function(e){var t=e.onChange,a=Object(se.a)(e,["onChange"]);return c.a.createElement(Ee.a,Object.assign({fullWidth:!0,variant:"outlined",autoComplete:"current-password",type:"password",name:"password",placeholder:"Password",onChange:t},a))},Se=function(e){var t=e.title,a=e.placeholder,n=e.name,r=e.rows,i=e.onChange,o=e.defaultValue;return c.a.createElement(c.a.Fragment,null,we(t,!0),c.a.createElement(Ee.a,{required:!0,fullWidth:!0,multiline:!!r,rows:r,variant:"outlined",name:n||t.toLowerCase(),placeholder:a,onChange:i,defaultValue:o}))};Se.defaultProps=je;var Pe=function(e){var t=e.title,a=e.placeholder,n=e.name,r=e.valid,i=e.onChange,o=e.onBlur,l=e.defaultValue;return c.a.createElement(c.a.Fragment,null,we(t,r),c.a.createElement(Ee.a,{required:!0,fullWidth:!0,variant:"outlined",placeholder:a,name:n||t.split(" ")[0].toLowerCase(),onChange:i,onBlur:o,defaultValue:l}))};Pe.defaultProps=Ce;var Ie=function(e){return c.a.createElement(Ee.a,Object.assign({},e,{variant:"outlined"}))};var Ne=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).isInvalid=function(){var e=r.state,t=e.email;return""===e.password||""===t},r.handleSubmitEmail=function(){var e=Object(k.a)(x.a.mark((function e(t){var a,n,c,i,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.state,n=a.email,c=a.password,i=r.props.firebase,t.preventDefault(),e.prev=3,e.next=6,i.doSignInWithEmailAndPassword(n,c);case 6:o=i.auth.currentUser,r.updateUser(o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),r.setState((function(e){return{error:Object(he.a)(Object(he.a)({},e.error),{},{submit:!0})}}));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),r.handleSubmitGoogle=Object(k.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.firebase,e.prev=1,e.next=4,t.doSignInWithGoogle();case 4:a=t.auth.currentUser,r.updateUser(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r.setState((function(e){return{error:Object(he.a)(Object(he.a)({},e.error),{},{google:!0})}}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),r.updateUser=function(e){j.a.post("https://joel-cookbook-server.herokuapp.com/user",{name:e.displayName,photo:e.photoURL})},r.handleInputChange=function(e){r.setState(Object(ce.a)({},e.target.name,e.target.value))},r.renderErrorMessage=function(){var e,t=r.props.classes,a=r.state.error,n=a.submit,i=a.google;if(n)return n?e="Incorrect Email or Password":i&&(e="Couldn't sign into Google"),c.a.createElement(U.a,{className:t.errorText,variant:"body2",display:"block",gutterBottom:!0},e)},r.state={email:"",password:"",error:{submit:!1,google:!1}},r}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state.email;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:e.socialContainer},c.a.createElement(ge.FacebookLoginButton,{align:"center",onClick:function(){return alert("Sorry Facebook isn't supported yet")}}),c.a.createElement(ge.TwitterLoginButton,{align:"center",onClick:function(){return alert("Sorry Twitter isn't supported yet")}}),c.a.createElement(ge.GoogleLoginButton,{align:"center",onClick:this.handleSubmitGoogle})),c.a.createElement("hr",{className:e.divider}),this.renderErrorMessage(),c.a.createElement("form",{onSubmit:this.handleSubmitEmail},c.a.createElement(R.a,{container:!0,spacing:2},c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(xe,{autoFocus:!0,email:t,onChange:this.handleInputChange})),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(Re,{onChange:this.handleInputChange})),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(re.a,{fullWidth:!0,disabled:this.isInvalid(),type:"submit",variant:"contained",color:"primary"},"Login")))))}}]),a}(r.Component);Ne.defaultProps={classes:{}};var De=Object(W.a)({socialContainer:{flexGrow:1,textAlign:"center"},divider:{margin:"10px 0px 10px"},errorText:{color:"#f44336"}})(u(Ne));var Ae=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).isInvalid=function(){var e=r.state,t=e.firstName,a=e.lastName,n=e.email,c=e.passwordOne,i=e.passwordTwo;return!e.valid||""===c||""===i||""===n||""===t||""===a},r.validatePasswords=Object(k.a)(x.a.mark((function e(){var t,a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,a=t.passwordOne,n=t.passwordTwo,a){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,be.string().min(8,"Password must be at least 8 charaters long").required("A password is required").validate(a);case 6:r.setState((function(e){return{error:Object(he.a)(Object(he.a)({},e.error),{},{pw1:!1})}})),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),r.setState((function(t){return{valid:!1,error:Object(he.a)(Object(he.a)({},t.error),{},{pw1:e.t0.message})}})),e.abrupt("return");case 13:if(n){e.next=15;break}return e.abrupt("return");case 15:return e.prev=15,e.next=18,be.string().matches(new RegExp(a),"Passwords don't match").required("Please confirm your password").validate(n);case 18:r.setState((function(e){return{valid:!0,error:Object(he.a)(Object(he.a)({},e.error),{},{pw2:!1})}})),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(15),r.setState((function(t){return{valid:!1,error:Object(he.a)(Object(he.a)({},t.error),{},{pw2:e.t1.message})}}));case 24:case"end":return e.stop()}}),e,null,[[3,9],[15,21]])}))),r.handleSubmitEmail=function(){var e=Object(k.a)(x.a.mark((function e(t){var a,n,c,i,o,l,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.state,n=a.email,c=a.passwordOne,i=a.firstName,o=a.lastName,l=r.props.firebase,t.preventDefault(),e.prev=3,e.next=6,l.doCreateUserWithEmailAndPassword(n,c);case 6:(s=l.auth.currentUser).updateProfile({displayName:"".concat(i," ").concat(o)}),r.updateUser(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),r.setState((function(e){return{error:Object(he.a)(Object(he.a)({},e.error),{},{submit:!0})}}));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),r.handleSubmitGoogle=Object(k.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.firebase,e.prev=1,e.next=4,t.doSignInWithGoogle();case 4:a=t.auth.currentUser,r.updateUser(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r.setState((function(e){return{error:Object(he.a)(Object(he.a)({},e.error),{},{google:!0})}}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),r.updateUser=function(e){j.a.post("https://joel-cookbook-server.herokuapp.com/user",{uid:e.uid,name:e.displayName,photo:e.photoURL})},r.handleInputChange=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(ce.a)({},a,n),(function(){"passwordTwo"===a&&r.validatePasswords()}))},r.state={firstName:"",lastName:"",email:"",passwordOne:"",passwordTwo:"",error:{}},r}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.email,n=t.error;return c.a.createElement("div",{className:e.container},c.a.createElement("div",{className:e.socialContainer},c.a.createElement(ge.FacebookLoginButton,{align:"center",onClick:function(){return alert("Sorry Facebook isn't supported yet")}},c.a.createElement("span",null,"Sign up with Facebook")),c.a.createElement(ge.TwitterLoginButton,{align:"center",onClick:function(){return alert("Sorry Twitter isn't supported yet")}},c.a.createElement("span",null,"Sign up with Twitter")),c.a.createElement(ge.GoogleLoginButton,{align:"center",onClick:this.handleSubmitGoogle},c.a.createElement("span",null,"Sign up with Google"))),c.a.createElement("hr",{className:e.divider}),c.a.createElement("form",{onSubmit:this.handleSubmitEmail},c.a.createElement(R.a,{container:!0,spacing:2},c.a.createElement(R.a,{item:!0,xs:12,sm:6},c.a.createElement(Ie,{autoFocus:!0,fullWidth:!0,name:"firstName",placeholder:"First Name",onChange:this.handleInputChange})),c.a.createElement(R.a,{item:!0,xs:12,sm:6},c.a.createElement(Ie,{fullWidth:!0,name:"lastName",placeholder:"Last Name",onChange:this.handleInputChange})),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(xe,{email:a,onChange:this.handleInputChange})),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(Re,{autoComplete:"new-password",name:"passwordOne",error:!!n.pw1,helperText:n.pw1,onChange:this.handleInputChange,onBlur:this.validatePasswords})),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(Re,{autoComplete:"new-password",name:"passwordTwo",placeholder:"Confirm Password",error:!!n.pw2,helperText:n.pw2,onChange:this.handleInputChange})),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(re.a,{fullWidth:!0,disabled:this.isInvalid(),type:"submit",variant:"contained",color:"primary"},"Create Account"))),n&&c.a.createElement("p",null,n.message)))}}]),a}(r.Component);Ae.defaultProps={classes:{}};var Te=Object(W.a)({socialContainer:{flexGrow:1,textAlign:"center"},divider:{margin:"10px 0px 10px"}})(u(Ae));var Fe=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleClick=function(e){r.setState({open:Object(ce.a)({},e,!0)})},r.handleToggleMenu=function(e){r.setState({anchorEl:e?e.currentTarget:null})},r.handleClose=function(){r.setState({open:{}})},r.handleSwitchForm=function(){r.setState((function(e){return{open:{signUp:!e.open.signUp,signIn:!e.open.signIn}}}))},r.renderForm=function(){var e=r.state.open;return e.signUp?c.a.createElement(Te,{changeForm:function(){r.setState({create:!1})}}):e.signIn?c.a.createElement(De,{changeForm:function(){r.setState({create:!0})}}):void 0},r.state={open:{signUp:e.open,signIn:!1,anchorEl:null}},r}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.firebase,n=t.classes,r=this.state,i=r.open,o=r.anchorEl,l=((a||{}).auth||{}).currentUser||void 0;return l?c.a.createElement(c.a.Fragment,null,c.a.createElement(G,{onClick:this.handleToggleMenu,src:l.photoURL,imgProps:{className:n.avatar,size:"large"},name:l.displayName,nameProps:{className:n.name,display:"left"}}),c.a.createElement(fe,{anchorEl:o,onClose:function(){return e.handleToggleMenu(null)}})):c.a.createElement(c.a.Fragment,null,c.a.createElement(re.a,{className:n.buttons,variant:"text",onClick:function(){return e.handleClick("signUp")}},"Sign Up"),c.a.createElement(re.a,{className:n.buttons,variant:"outlined",onClick:function(){return e.handleClick("signIn")}},"Sign In"),c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.a,{maxWidth:"xs",open:!l&&(i.signIn||i.signUp),onClose:function(){e.setState({open:{}})}},c.a.createElement(oe.a,null,this.renderForm()),c.a.createElement(le.a,null,c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(re.a,{color:"primary",onClick:this.handleSwitchForm},i.signUp?"Log in instead":"Create account"),c.a.createElement(re.a,{style:{float:"right"},variant:"contained",color:"primary",onClick:this.handleClose},"Close"))))))}}]),a}(r.Component);Fe.defaultProps={firebase:null,open:!1,classes:{}};var _e=Object(S.a)((function(e){return{buttons:{marginLeft:e.spacing(),color:"white",borderColor:"white","&:hover":{color:"hsla(0,0%,100%,.75)",borderColor:"hsla(0,0%,100%,.75)"}},name:{paddingRight:e.spacing(1),color:"white",cursor:"pointer"},avatar:{cursor:"pointer"}}}))(u(Fe)),Ue=a(446),We=a(463),Le=a(209),Be=a.n(Le),Ve=a(210),Me=a.n(Ve);var Ge=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleFocus=function(e){return function(){r.setState({focused:e})}},r.handleChange=function(e){r.setState({search:e.target.value})},r.handleSubmit=function(){r.setState({complete:!0})},r.state={search:"",focused:!1,complete:!1},r}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=t.complete,n=this.state.complete;n&&n!==a&&this.setState({complete:!1,search:""})}},{key:"render",value:function(){var e=this.props.classes,t=e.root,a=e.rootBlur,n=e.rootFocus,r=e.icon,i=e.iconFocus,o=e.iconBlur,l=e.input,s=e.inputFocus,u=e.inputBlur,m=this.state,p=m.focused,d=m.complete,f=m.search;return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement(J.a,{className:"".concat(t," ").concat(p?n:a),elevation:0},c.a.createElement(Ue.a,{className:"".concat(r," ").concat(p?i:o),"aria-label":"menu"},c.a.createElement(Be.a,null)),c.a.createElement(We.a,{className:"".concat(l," ").concat(p?s:u),placeholder:"Search...",onChange:this.handleChange,onKeyPress:this.handleKeyPress,onFocus:this.handleFocus(!0),onBlur:this.handleFocus(!1),value:f}),c.a.createElement(Ue.a,{className:"".concat(r," ").concat(p?i:o),type:"submit","aria-label":"search"},c.a.createElement(Me.a,{fontSize:"small"})))),d&&c.a.createElement(v.a,{push:!0,to:{pathname:"recipes",search:"?search=".concat(f)}}))}}]),a}(r.PureComponent),ze=Object(W.a)({root:{display:"flex",alignItems:"center",transition:"width 0.2s"},rootBlur:{backgroundColor:"hsla(0,0%,100%,.125)",width:350},rootFocus:{backgroundColor:"white",width:450},input:{flex:1},inputFocus:{color:"#000000cc"},inputBlur:{color:"white"},icon:{padding:"8px"},iconFocus:{color:"#000000bb"},iconBlur:{color:"#ffffff50"}})(Ge),qe=a(211),He=a.n(qe);var Ke=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return c.a.createElement("div",{className:e.base},c.a.createElement(ae.a,{color:"secondary",position:"sticky"},c.a.createElement(ne.a,null,c.a.createElement(g.b,{to:"".concat("","/"),className:e.link},c.a.createElement(re.a,{color:"secondary"},c.a.createElement("img",{src:He.a,alt:"logo",className:e.logo}),c.a.createElement("b",{style:{color:"white"}},"My Cookbook"))),c.a.createElement(ze,{onSearch:this.handleSearch}),c.a.createElement("div",{className:e.right},c.a.createElement(_e,null)))))}}]),a}(r.Component);Ke.defaultProps={classes:{}};var Ye=Object(W.a)((function(e){return{base:{marginBottom:e.spacing(1)},right:{marginLeft:"auto"},link:{textDecoration:"none",all:"inherit",color:"#202020"},logo:{width:"28px",height:"auto",paddingRight:"9px"}}}))(Ke),Je=function(e){var t=e.component,a=e.authUser,n=Object(se.a)(e,["component","authUser"]);return c.a.createElement(v.b,Object.assign({},n,{render:function(e){return null!==a?c.a.createElement(t,e):c.a.createElement(v.a,{to:{pathname:"".concat("","/"),state:{from:e.location,openAuth:!0}}})}}))};Je.defaultProps={authUser:null,location:null};var Qe=Je,$e=a(137),Xe=a.n($e),Ze=a(214),et=a.n(Ze),tt=a(215),at=a.n(tt),nt=(a(397),a(398),a(212)),rt=a.n(nt),ct=function(e){var t=e.items;return c.a.createElement(rt.a,{items:t,showPlayButton:!1,renderFullscreenButton:function(){}})};ct.defaultProps={items:[]};var it=ct,ot=a(449),lt=a(450),st=a(213),ut=a.n(st);var mt=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleOpen=function(){r.setState({open:!0})},r.handleClose=function(){r.setState({open:!1})},r.handleDelete=Object(k.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.props.recipeId;try{Y("recipe/delete/".concat(t)),r.setState({deleted:!0})}catch(a){r.setState({error:a})}case 2:case"end":return e.stop()}}),e)}))),r.state={open:!1,deleted:!1},r}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.title,n=this.state,r=n.open,i=n.deleted;return c.a.createElement(c.a.Fragment,null,c.a.createElement(re.a,{className:t.warning,variant:"contained",color:"primary",onClick:this.handleOpen},c.a.createElement(ut.a,{fontSize:"small"}),"Delete"),c.a.createElement(ie.a,{open:r,maxWidth:"md",onClose:this.handleClose},c.a.createElement(ot.a,null,"Delete Recipe?"),c.a.createElement(oe.a,null,c.a.createElement(lt.a,null,'Delete the recipe "'.concat(a,'"?'))),c.a.createElement(le.a,null,c.a.createElement(re.a,{className:t.warning,variant:"contained",onClick:this.handleDelete},"Delete"),c.a.createElement(re.a,{variant:"contained",color:"primary",onClick:this.handleClose,autoFocus:!0},"Cancel"))),i&&c.a.createElement(v.a,{to:"/"}))}}]),a}(r.PureComponent),pt=Object(S.a)({warning:{color:"#fff",backgroundColor:"#b71c1c","&:hover":{backgroundColor:"#d50000"}}})(mt);var dt=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).renderControls=function(){var e=r.props.classes,t=r.state.recipe,a=t.owner,n=t.title,i=t._id;if(a)return c.a.createElement(c.a.Fragment,null,c.a.createElement(re.a,{className:e.buttons,onClick:function(){return r.setState({edit:!0})},variant:"contained",color:"primary"},c.a.createElement(et.a,{className:e.edit,fontSize:"small"}),"Edit"),c.a.createElement(pt,{className:e.buttons,recipeId:i,title:n}))},r.renderGallery=function(){var e=r.state.recipe.images;if(e){var t=e.map((function(e){return{original:"https://i.imgur.com/".concat(e.id,"h.jpeg"),thumbnail:"https://i.imgur.com/".concat(e.id,"b.jpeg"),imageSet:[]}}));return c.a.createElement(it,{items:t})}},r.renderIngredients=function(){return r.state.recipe.ingredients.map((function(e,t){return c.a.createElement("li",{key:"ingredient-".concat(t)},c.a.createElement(U.a,{variant:"body1"},e))}))},r.renderInstructions=function(){return r.state.recipe.instructions.map((function(e,t){return c.a.createElement("li",{key:"instruction-".concat(t)},c.a.createElement(U.a,{variant:"body1"},e))}))},r.state={recipe:{title:"",description:"",images:[],ingredients:[],instructions:[]},edit:!1},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;K("recipe/".concat(t.recipeId)).then((function(t){e.setState({recipe:Object(he.a)({},t.data)})})).catch((function(t){e.setState({error:t})}))}},{key:"renderSummary",value:function(){var e=this.props.classes,t=this.state.recipe,a=t.title,n=t.description,r=t.prep,i=t.cook,o=t.ready,l=t.servings;return c.a.createElement(J.a,{square:!0,className:e.paper},c.a.createElement(R.a,{container:!0,spacing:2},c.a.createElement(R.a,{item:!0,xs:12,style:{paddingBottom:70}},c.a.createElement("div",{style:{display:"flex"}},c.a.createElement("div",{className:e.textContainer},c.a.createElement(U.a,{variant:"h5"},a),c.a.createElement(U.a,{variant:"body1"},n)),c.a.createElement("div",{className:e.imageContainer},this.renderGallery()))),c.a.createElement(R.a,{item:!0,xs:12},this.renderControls()),c.a.createElement("br",null),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(R.a,{container:!0,justify:"space-between"},c.a.createElement(U.a,{variant:"h6",display:"inline",align:"left"},"Ingredients"),c.a.createElement(U.a,{variant:"body1",display:"inline",align:"right"},c.a.createElement(c.a.Fragment,null,o),c.a.createElement(Xe.a,{className:e.icons}),c.a.createElement(c.a.Fragment,null,l),c.a.createElement(c.a.Fragment,null," servings"),c.a.createElement(at.a,{className:e.icons}))),c.a.createElement("hr",null),c.a.createElement("ul",null,this.renderIngredients())),c.a.createElement(R.a,{item:!0,xs:6}),c.a.createElement("br",null),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(U.a,{variant:"h6"},"Directions"),c.a.createElement("hr",null),c.a.createElement(R.a,{container:!0,alignItems:"center",spacing:2},c.a.createElement(R.a,{item:!0},c.a.createElement(Xe.a,null)),c.a.createElement(R.a,{item:!0},c.a.createElement(U.a,{variant:"body1",className:e.timing},c.a.createElement(c.a.Fragment,null,"Prep"),c.a.createElement("br",null),c.a.createElement(U.a,{variant:"caption"},r))),c.a.createElement(R.a,{item:!0},c.a.createElement(U.a,{variant:"body1",className:e.timing},c.a.createElement(c.a.Fragment,null,"Cook"),c.a.createElement("br",null),c.a.createElement(U.a,{variant:"caption"},i))),c.a.createElement(R.a,{item:!0},c.a.createElement(U.a,{variant:"body1"},c.a.createElement(c.a.Fragment,null,"Ready In"),c.a.createElement("br",null),c.a.createElement(U.a,{variant:"caption"},o)))),c.a.createElement("ol",null,this.renderInstructions()))))}},{key:"render",value:function(){var e=this.state,t=e.edit,a=e.recipe;return c.a.createElement(c.a.Fragment,null,c.a.createElement(R.a,{container:!0},c.a.createElement(R.a,{md:1,item:!0,lg:2}),c.a.createElement(R.a,{container:!0,item:!0,md:10,lg:6,spacing:2},this.renderSummary()),c.a.createElement(R.a,{md:1,item:!0,lg:4})),t&&c.a.createElement(v.a,{to:{pathname:"".concat("","/recipe/").concat(a._id,"/edit"),state:{recipe:a}},push:!0}))}}]),a}(r.Component);dt.defaultProps={classes:{}};var ft=Object(S.a)((function(e){return{paper:{flexGrow:1,minHeight:100,paddingTop:17,padding:10},textContainer:{flex:"0 0 42%"},imageContainer:{flex:1,maxWidth:550,maxHeight:360},image:{maxWidth:"100%",maxHeight:400,height:"auto"},timing:{borderRight:"0.05em solid black",paddingRight:"0.8em"},buttons:{marginRight:e.spacing(1)},edit:{marginRight:4},icons:{marginRight:8,marginLeft:4}}}))(u(dt)),ht=a(115),gt=a(453),vt=a(464),Et=function(e){var t=e.onChange,a=e.validate,n=e.valid,r=e.defaultValues;return c.a.createElement(c.a.Fragment,null,c.a.createElement(R.a,{item:!0,xs:4},c.a.createElement(Pe,{title:"Prep Time",placeholder:"15m",valid:n.prep,onChange:t,onBlur:a,defaultValue:r?r.prep:void 0})),c.a.createElement(R.a,{item:!0,xs:4},c.a.createElement(Pe,{title:"Cook Time",placeholder:"1h 45m",valid:n.cook,onChange:t,onBlur:a,defaultValue:r?r.cook:void 0})),c.a.createElement(R.a,{item:!0,xs:4},c.a.createElement(Pe,{title:"Ready In",placeholder:"2h",valid:n.ready,onChange:t,onBlur:a,defaultValue:r?r.ready:void 0})))};Et.defaultProps={defaultValues:{}};var bt=Et,yt=a(452),Ot=a(220),jt=a(216),Ct=a.n(jt),wt=a(222),xt=(a(403),a(451));var kt=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).getClassName=function(e,t){return t?"".concat(e," ").concat(e,"-active"):e},e.renderContent=function(){return e.props.loading?c.a.createElement(xt.a,{size:25}):c.a.createElement(U.a,null,c.a.createElement("b",null,"Choose a file "),"or drag it here")},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.onDrop;return c.a.createElement(wt.a,{accept:"image/*",onDrop:t},(function(t){var a=t.getRootProps,n=t.getInputProps,r=t.isDragActive;return c.a.createElement("section",{className:"container"},c.a.createElement("div",a({className:e.getClassName("dropzone",r)}),c.a.createElement("input",n()),e.renderContent()))}))}}]),a}(r.PureComponent),Rt=a(457),St=a(458),Pt=(a(404),function(e){var t=e.image,a=e.index,n=e.onMove,i=Object(r.useRef)(null),o=Object(Rt.a)({accept:"Image",hover:function(e){if(i.current){var t=e.index,r=a;t!==r&&(n(t,r),e.index=r)}}}),l=Object(ve.a)(o,2)[1],s=Object(St.a)({item:{type:"Image",id:t.id,index:a},collect:function(e){return{isDragging:e.isDragging()}}});return(0,Object(ve.a)(s,2)[1])(l(i)),c.a.createElement("div",{ref:i,className:"file-item"},c.a.createElement("img",{alt:"",src:"https://i.imgur.com/".concat(t.id,".jpg"),className:"file-img"}))}),It=function(e){var t=e.images,a=e.onMove;return c.a.createElement(c.a.Fragment,null,t.length?c.a.createElement(U.a,{style:{paddingTop:"8px"}},"Drag to Move Images"):void 0,c.a.createElement("section",{className:"file-list"},t.map((function(e,t){return c.a.createElement(Pt,{image:e,index:t,key:"".concat(e.id,"-image"),onMove:a})}))))};var Nt=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleDrop=function(){var e=Object(k.a)(x.a.mark((function e(t){var a,n,c,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.props.onUpload,r.setState({loading:!0}),n=new Ct.a,e.next=5,n.compress(t,{size:10,quality:.8});case 5:return c=e.sent,i=[],c.forEach((function(e){i.push(r.uploadToImgur(e.data))})),e.t0=a,e.next=11,Promise.all(i);case 11:e.t1=e.sent,(0,e.t0)(e.t1),r.setState({loading:!1});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.uploadToImgur=function(){var e=Object(k.a)(x.a.mark((function e(t){var a,n,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("image",t),"643c914b5a7a2f3",e.prev=3,e.next=6,fetch("https://api.imgur.com/3/image",{method:"POST",headers:new Headers({Authorization:"Client-ID ".concat("643c914b5a7a2f3")}),body:a});case 6:return n=e.sent,e.next=9,n.json();case 9:return r=e.sent,c=r.data,e.abrupt("return",{id:c.id,deleteHash:c.deletehash});case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),r.state={loading:!1},r}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.images,a=e.onMove,n=this.state.loading;return c.a.createElement(c.a.Fragment,null,c.a.createElement(kt,{onDrop:this.handleDrop,loading:n}),c.a.createElement(yt.a,{backend:Ot.a},c.a.createElement(It,{images:t,onMove:a})))}}]),a}(r.PureComponent);var Dt={title:"",description:"",ingredients:[],instructions:[],images:[],prep:void 0,cook:void 0,ready:void 0,private:!1},At=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var r;Object(n.a)(this,a),(r=t.call(this,e)).handleSwitchChange=function(e){return function(t){t.persist(),r.setState((function(a){return{recipe:Object(he.a)(Object(he.a)({},a.recipe),{},Object(ce.a)({},e,t.target.checked))}}))}},r.handleInputChange=function(e){var t=e.target,a=t.name,n=t.value;r.setState((function(e){return{recipe:Object(he.a)(Object(he.a)({},e.recipe),{},Object(ce.a)({},a,n.replace(/\s\s+/g," ").replace(/\n\s*\n/g," ").trim()))}}))},r.handleMultiLineInputChange=function(e){var t=e.target,a=t.name,n=t.value;r.setState((function(e){return{recipe:Object(he.a)(Object(he.a)({},e.recipe),{},Object(ce.a)({},a,n.replace(/\n\s*\n/g,"\n").replace(/\s\s+/g," ").trim().split(/\r?\n/)))}}))},r.validateField=function(){var e=r.state.recipe,t=e.cook,a=e.prep,n=e.ready,c={},i=/(^\d+h( +[0-5]?\dm)?$|^[0-5]?\dm$)/;c.prep=!(a&&!i.test(a)),c.cook=!(t&&!i.test(t)),c.ready=!(n&&!i.test(n)),r.setState({valid:c})},r.handleImageUpload=function(e){r.setState((function(t){return{recipe:Object(he.a)(Object(he.a)({},t.recipe),{},{images:[].concat(Object(ht.a)(t.recipe.images),Object(ht.a)(e))})}}))},r.handleImageMove=function(e,t){var a=r.state.recipe.images,n=Object(ht.a)(a),c=n[e];n.splice(e,1),n.splice(t,0,c),r.setState((function(e){return{recipe:Object(he.a)(Object(he.a)({},e.recipe),{},{images:n})}}))},r.addRecipe=function(e){var t=r.state.recipe;Y("recipe",t).then((function(){r.setState({status:{added:!0}})})).catch((function(e){r.setState({errors:{save:e}})})),e.preventDefault()},r.cancelRecipe=function(){var e=r.state,t=e.recipe.images;if(e.create&&t.length){t.forEach((function(e){j.a.delete("https://api.imgur.com/3/image/".concat(e.deleteHash),{headers:{Authorization:"Client-ID ".concat("643c914b5a7a2f3")}})}))}r.setState({status:{cancel:!0}})},r.renderError=function(){var e=r.state.errors;return e.upload?c.a.createElement("p",null,e.upload):e.save?c.a.createElement("p",null,"Error saving your recipe"):null},r.renderOptions=function(){var e=r.state,t=e.recipe,a=e.valid;return c.a.createElement(c.a.Fragment,null,c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(Nt,{images:t.images,onUpload:r.handleImageUpload,onMove:r.handleImageMove})),c.a.createElement(bt,{valid:a,validate:r.validate,onChange:r.handleInputChange,defaultValues:t}),c.a.createElement(R.a,{item:!0,xs:4},c.a.createElement(ke,{title:"Servings",min:"1",onChange:r.handleInputChange,defaultValue:t?t.servings:void 0})),c.a.createElement(R.a,{item:!0,xs:8}),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(gt.a,{value:"true",label:"Private",control:c.a.createElement(vt.a,{checked:!!t&&t.private,value:"private",onChange:r.handleSwitchChange("private")})})))},r.renderDetails=function(){var e=r.props,t=e.classes,a=((e.location||{}).state||{}).recipe||{};return c.a.createElement(R.a,{container:!0,spacing:2,className:t.details},c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(Se,{title:"Recipe Title",name:"title",onChange:r.handleInputChange,defaultValue:a?a.title:void 0})),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(Se,{rows:3,title:"Description",onChange:r.handleInputChange,defaultValue:a?a.description:void 0})),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(Se,{rows:8,title:"Ingredients",placeholder:"Put each ingredient on its own line",onChange:r.handleMultiLineInputChange,defaultValue:a&&a.ingredients?a.ingredients.join("\n"):void 0})),c.a.createElement(R.a,{item:!0,xs:12},c.a.createElement(Se,{rows:8,title:"Instructions",placeholder:"Put each step on its own line",onChange:r.handleMultiLineInputChange,defaultValue:a&&a.instructions?a.instructions.join("\n"):void 0})))};var i=((e.location||{}).state||{}).recipe||{};return r.state={recipe:Object.keys(i).length?Object(he.a)({},i):Object(he.a)({},Dt),status:{added:!1,cancel:!1},errors:{save:!1},valid:{prep:!0,cook:!0,ready:!0},create:!Object.keys(i).length},r}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.location,n=this.state,r=n.status,i=n.create;return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{onSubmit:this.addRecipe},c.a.createElement(R.a,{container:!0},c.a.createElement(R.a,{item:!0,lg:1,xl:2}),c.a.createElement(R.a,{container:!0,item:!0,xs:12,lg:10,xl:8,className:t.container},c.a.createElement(R.a,{item:!0,xs:12,md:4},c.a.createElement(R.a,{container:!0,spacing:2,className:t.grid},this.renderOptions())),c.a.createElement(R.a,{item:!0,xs:12,md:8},this.renderDetails()),c.a.createElement(R.a,{item:!0,xs:12}),c.a.createElement(R.a,{item:!0,className:t.grid},c.a.createElement(re.a,{type:"submit",variant:"contained",color:"primary",className:t.submit},"Save")),c.a.createElement(R.a,{item:!0,className:t.grid},c.a.createElement(re.a,{variant:"contained",className:t.cancel,onClick:this.cancelRecipe},"Cancel"))),c.a.createElement(R.a,{item:!0,lg:1,xl:2}))),this.renderError(),(r.added||r.cancel)&&c.a.createElement(v.a,{to:"/"}),i&&a.pathname.includes("edit")&&c.a.createElement(v.a,{to:"/"}))}}]),a}(r.Component);At.defaultProps={classes:{},location:{}};var Tt=Object(S.a)({container:{backgroundColor:"#FFFFFF"},submit:{paddingLeft:80,paddingRight:80},cancel:{color:"#fff",backgroundColor:"#b71c1c","&:hover":{backgroundColor:"#d50000"},paddingLeft:38,paddingRight:38},grid:{padding:30},cloudIcon:{marginLeft:4},upload:{display:"none"},details:{padding:30}})(u(At));var Ft=Object(C.a)({palette:{primary:{main:"#1565c0"},secondary:{main:"#24292e"}},overrides:{MuiButton:{root:{textTransform:"none"}}}}),_t=u(function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(h.a)(e);if(t()){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={authUser:null},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.firebase;this.listener=t.auth.onAuthStateChanged((function(a){e.setState({authUser:a||null}),a&&t.auth.currentUser.getIdToken().then((function(e){j.a.defaults.headers.common.Authorization=e}))}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var e=this.state.authUser;return c.a.createElement(y.a,{theme:Ft},c.a.createElement(b.a,{bodyAttributes:{style:"background-color : #f0f0f0; margin : 0px"}}),c.a.createElement(g.a,{basename:"/"},c.a.createElement(Ye,null),c.a.createElement(v.d,null,c.a.createElement(v.b,{exact:!0,path:"".concat("","/"),component:te}),c.a.createElement(v.b,{path:"".concat("","/recipes"),component:te}),c.a.createElement(Qe,{exact:!0,authUser:e,path:"".concat("","/recipe/new"),component:Tt}),c.a.createElement(v.b,{exact:!0,path:"".concat("","/recipe/:recipeId/edit"),component:Tt}),c.a.createElement(v.b,{exact:!0,path:"".concat("","/recipe/:recipeId"),component:ft}))))}}]),a}(r.Component)),Ut=a(19);a.n(Ut).a.render(c.a.createElement(s.Provider,{value:new m},c.a.createElement(_t,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[233,1,2]]]);
//# sourceMappingURL=main.33524ae9.chunk.js.map